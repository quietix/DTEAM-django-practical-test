{% extends 'main/base.html' %}

{% block title %}{{ cv.firstname }} {{ cv.lastname }}'s CV{% endblock %}

{% block content %}
<div class="card">
    <div class="card-body">
        <h1 class="card-title mb-4">{{ cv.firstname }} {{ cv.lastname }}</h1>
        
        <div class="mb-4">
            <h3>Skills</h3>
            <p class="card-text">{{ cv.skills|linebreaks }}</p>
        </div>

        <div class="mb-4">
            <h3>Projects</h3>
            <p class="card-text">{{ cv.projects|default:"No projects listed"|linebreaks }}</p>
        </div>

        <div class="mb-4">
            <h3>Bio</h3>
            <p class="card-text">{{ cv.bio|default:"No bio available"|linebreaks }}</p>
        </div>

        <div class="mb-4">
            <h3>Contacts</h3>
            <p class="card-text">{{ cv.contacts|linebreaks }}</p>
        </div>

        <form class="mb-3" method="post" action="{% url 'main:cv-download' cv.id %}">
            {% csrf_token %}
            <button type="submit" class="btn btn-primary">Download CV</button>
        </form>

        <form class="mb-3" method="post" action="{% url 'main:send-cv-email' cv.id %}" id="emailForm">
            {% csrf_token %}
            <div class="input-group">
                <input type="email" name="email" class="form-control" placeholder="Enter email address" required>
                <button type="submit" class="btn btn-success">Send PDF to Email</button>
            </div>
        </form>

        <div id="emailMessage" class="alert d-none mb-3"></div>

        <a href="{% url 'main:cv-list' %}" class="btn btn-secondary">Back to List</a>
    </div>
</div>
{% endblock %}